<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Flashcard Study App</title>
    <link rel="stylesheet" href="/css/dashboard-style.css">
    <link rel="stylesheet" href="/css/fontawesome-free-6.7.2-web/css/all.min.css">
</head>
<body>
    <!-- Top Navigation Bar -->
    <div id="top-nav">
        <button id="sidebar-toggle" class="nav-btn">
            <i class="fas fa-bars"></i>
        </button>
        <div class="logo">Med Memory</div>
        <div class="nav-buttons">
            <span id="username-display" class="username-display"></span>
            <button id="overview-button">General</button>
            <button id="test-dynamic-deck-btn" style="background: #fd5e53; color: white; padding: 5px 10px; border: none; border-radius: 4px; margin-right: 10px; cursor: pointer;">Test Dynamic Deck</button>
            <button id="faq-button" aria-label="Frequently Asked Questions">Ayuda</button>
            <button id="contact-button">Contacto</button>
            <button class="nav-btn" id="logout">Cerrar sesión</button>
        </div>
    </div>

    <!-- Sidebar Section -->
    <div id="sidebar">
        <h2>Mis Mazos</h2>
        <ul id="deck-list">
            <li>
                <button id="open-admin-btn" class="nav-btn">Admin Panel</button>
            </li>
            <li>
                <button id="microbiologíay-btn" class="deck-btn">
                    <span class="deck-name">Microbiología</span><span class="plus">+</span>
                </button>
                <ul class="subdeck-list">
                    <li><button class="subdeck-btn">Bacterias</button></li>
                    <li><button class="subdeck-btn">Hongos</button></li>
                    <li><button class="subdeck-btn">Parásitos</button></li>
                    <li><button class="subdeck-btn">Virus</button></li>
                </ul>
            </li>
            <li>
                <button id="patología-btn" class="deck-btn">
                    <span class="deck-name">Patología</span><span class="plus">+</span>
                </button>
                <ul class="subdeck-list">
                    <li><button class="subdeck-btn">ERA1</button></li>
                    <li><button class="subdeck-btn">ERA2</button></li>
                    <li><button class="subdeck-btn">ERA3</button></li>
                </ul>
            </li>
            <li>
                <button id="semiología-btn" class="deck-btn">
                    <span class="deck-name">Semiología</span><span class="plus">+</span>
                </button>
                <ul class="subdeck-list">
                    <li><button class="subdeck-btn">Historía clínica</button></li>
                    <li><button class="subdeck-btn">Piel y faneras</button></li>
                    <li><button class="subdeck-btn">Cabeza y cuello</button></li>
                    <li><button class="subdeck-btn">Respiratorio</button></li>
                    <li><button class="subdeck-btn">Cardiovascular</button></li>
                    <li><button class="subdeck-btn">Digestivo</button></li>
                    <li><button class="subdeck-btn">Urinario</button></li>
                    <li><button class="subdeck-btn">Neurología</button></li>
                    <li><button class="subdeck-btn">Osteoarticular</button></li>
                </ul>
            </li>
            <li>
                <button id="farmacología-btn" class="deck-btn">
                    <span class="deck-name">Farmacología</span><span class="plus">+</span>
                </button>
                <ul class="subdeck-list">
                    <li><button class="subdeck-btn">ERA1</button></li>
                    <li><button class="subdeck-btn">ERA2</button></li>
                </ul>
            </li>
            <li>
                <button id="terapéutica1-btn" class="deck-btn">
                    <span class="deck-name">Terapéutica 1</span><span class="plus">+</span>
                </button>
                <ul class="subdeck-list">
                    <li><button class="subdeck-btn">ERA1</button></li>
                    <li><button class="subdeck-btn">ERA2</button></li>
                    <li><button class="subdeck-btn">ERA3</button></li>
                </ul>
            </li>
            <li>
                <button id="medicinainterna1-btn" class="deck-btn">
                    <span class="deck-name">Medicina Interna 1</span><span class="plus">+</span>
                </button>
                <ul class="subdeck-list">
                    <li><button class="subdeck-btn">Neumonología</button></li>
                    <li><button class="subdeck-btn">Cardiovascular</button></li>
                    <li><button class="subdeck-btn">Tubo Digestivo</button></li>
                    <li><button class="subdeck-btn">Neurología</button></li>
                    <li><button class="subdeck-btn">Anexos</button></li>
                </ul>
            </li>
            <li>
                <button id="revalida-btn" class="deck-btn">
                    <span class="deck-name">Revalida <span class="soon-label">(en breve!)</span></span><span class="plus">+</span>
                </button>
                <ul class="subdeck-list">
                    <li><button class="subdeck-btn">Bling</button></li>
                    <li><button class="subdeck-btn">Blang</button></li>
                    <li><button class="subdeck-btn">Blong</button></li>
                </ul>
            </li>
            <li>
                <button id="mir-btn" class="deck-btn">
                    <span class="deck-name">MIR <span class="soon-label">(en breve!)</span></span><span class="plus">+</span>
                </button>
                <ul class="subdeck-list">
                    <li><button class="subdeck-btn">Bling</button></li>
                    <li><button class="subdeck-btn">Blang</button></li>
                    <li><button class="subdeck-btn">Blong</button></li>
                </ul>
            </li>
        </ul>
        <div class="sidebar-footer">
            <a href="https://wa.me/+55479igyggg36792" target="_blank" class="social-icon">
                <i class="fab fa-whatsapp"></i>
            </a>
            <a href="https://inslknknknkmk/medmemory.ar" target="_blank" class="social-icon">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="mailto:medmevhvuygmory@outlook.com" class="social-icon">>
                <i class="fas fa-envelope"></i>
            </a>
        </div>
    </div>

    <!-- Main Content Section -->
    <div id="main-content">
        <div class="stats-container">
            <div id="stats-panel">
                <h2>Your Stats</h2>
                <div class="stat-item">
                    <i class="fas fa-eye"></i>
                    <div class="stat-content">
                        <div class="stat-value">42</div>
                        <div class="stat-label">Cards Viewed Today</div>
                    </div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-fire"></i>
                    <div class="stat-content">
                        <div class="stat-value">7</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-trophy"></i>
                    <div class="stat-content">
                        <div class="stat-value">14</div>
                        <div class="stat-label">Longest Streak</div>
                    </div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-award"></i>
                    <div class="stat-content">
                        <div class="stat-value">108</div>
                        <div class="stat-label">Record Cards in a Day</div>
                    </div>
                </div>
            </div>
            
            <div class="main-content-column">
                <!-- Updates Dropdown Container -->
                <div class="updates-dropdown">
                    <button class="dropdown-toggle">
                        Noticias y Actualizaciones ▼
                    </button>
                    <div class="dropdown-content">
                        <!-- Update Items -->
                        <div class="update-item">
                            <h4>Última Actualización - 15/07/2024</h4>
                            <p>• Nuevo contenido de Microbiología agregado</p>
                            <p>• Mejoras en el sistema de repetición espaciada</p>
                        </div>
                        
                        <div class="update-item">
                            <h4>Próximas Novedades</h4>
                            <p>• Contenido MIR en desarrollo (¡muy pronto!)</p>
                            <p>• Nuevo diseño de tarjetas interactivas</p>
                        </div>
                    </div>
                </div>
                
                <!-- Overview Section with explicit table structure -->
                <div id="overview-section">
                    <table>
                        <thead>
                            <tr>
                                <th>Mazo</th>
                                <th>Nuevas</th>
                                <th>Pendientes</th>
                            </tr>
                        </thead>
                        <tbody id="overview-table-body">
                            <!-- Rows will be dynamically populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="admin-modal" class="admin-modal hidden">
            <div class="admin-modal-content">
                <span class="admin-close-btn">&times;</span>
                <h2>Admin Panel</h2>
                <div class="admin-form-container">
                    <form id="add-flashcard-form">
                        <div class="form-columns">
                            <div class="form-column form-column-left">
                                <div class="form-group">
                                    <label for="question">Content Format:</label>
                                    <textarea id="question" required placeholder="For Classic Cards:
Linha 1: Pergunta
Linha 2: Subtítulo
Linhas 3+: Conteúdo da resposta
Use '/note Sua nota aqui' para notas adicionais

Para Múltipla Escolha:
Linha 1: Pergunta
Linhas 2-7: Opções (marque a resposta correta com ] no final)
Comentario: Comecar frase com /

Example: What is the capital of France?
Qual é a capital da França?
Londres
Berlim
Amsterdam
Paris]
/Paris também é conhecida como Cidade Luz"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-column form-column-middle">
                                <div class="form-group">
                                    <label>Card Type:</label>
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="card-type" value="classic" checked>
                                            Classic
                                        </label>
                                        <label>
                                            <input type="radio" name="card-type" value="multipleChoice">
                                            Multiple Choice
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="deck-select">Deck:</label>
                                    <select id="deck-select" required>
                                        <!-- Deck options will be populated dynamically -->
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="subdeck">Subdeck:</label>
                                    <input type="text" id="subdeck" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="tags">Tags (comma separated):</label>
                                    <input type="text" id="tags">
                                </div>
                            </div>
                            
                            <div class="form-column form-column-preview">
                                <div class="preview-section">
                                    <h3>Live Preview</h3>
                                    <div class="preview-buttons">
                                        <button type="button" id="preview-btn" class="btn btn-preview">Generate Preview</button>
                                        <button type="button" id="expand-preview-btn" class="btn btn-preview">Show All Cards</button>
                                    </div>
                                    <div class="card-preview">
                                        <!-- Card preview will be dynamically generated here -->
                                    </div>
                                    <div class="expanded-preview">
                                        <!-- Multiple card previews will be shown here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Flashcard</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Preview overlay for fullscreen mode -->
        <div class="preview-overlay"></div>
        
        <!-- Fixed position close buttons for expanded preview -->
        <button id="preview-close-x" style="display: none; position: fixed; top: 20px; right: 20px; width: 60px; height: 60px; background-color: #ff3b30; color: white; border: 3px solid white; border-radius: 50%; font-size: 40px; line-height: 50px; text-align: center; cursor: pointer; z-index: 10000; box-shadow: 0 4px 10px rgba(0,0,0,0.3);">&times;</button>
        
        <button id="preview-return-btn" style="display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 15px 30px; background-color: #007aff; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; z-index: 10000; box-shadow: 0 4px 10px rgba(0,0,0,0.3);">Return to Admin Panel</button>

        <!-- Calendar Section -->
        <div id="study-calendar">
            <h3>Calendario de Estudio</h3>
            <div class="calendar-header">
                <span class="month-year">Enero 2025</span>
            </div>
            <div class="calendar-grid">
                <div class="day-header">L</div>
                <div class="day-header">M</div>
                <div class="day-header">M</div>
                <div class="day-header">J</div>
                <div class="day-header">V</div>
                <div class="day-header">S</div>
                <div class="day-header">D</div>
                
                <!-- Blank days for February 2025 (starts on Saturday) -->
                <div class="calendar-day empty"></div>
                <div class="calendar-day empty"></div>
                <div class="calendar-day empty"></div>
                <div class="calendar-day empty"></div>
                <div class="calendar-day empty"></div>
                <div class="calendar-day empty"></div>
                <div class="calendar-day highlighted">1<span class="due-count">14</span></div>
                <!-- Add more days as needed -->
            </div>
        </div>

        <!-- Flashcard Section -->
        <div id="flashcard-system" class="hidden">

        <!-- Card Status -->
        <div id="card-status">
            <span id="status"></span>
        </div>
    </div>

    <script src="/js/dashboard-script.js"></script>
</body>
</html>