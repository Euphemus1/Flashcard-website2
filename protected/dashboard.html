<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcard Study App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', sans-serif;
            background-color: #f5f5f5;
            display: flex;
            height: 100vh;
        }

        /* Sidebar section */
        #sidebar {
            background-color: #2c3e50;
            color: white;
            width: 250px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: space-between;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
        }

        #sidebar h2 {
            margin-bottom: 20px;
        }

        #deck-list {
            list-style-type: none;
            padding: 0;
            margin-bottom: 20px;
            width: 100%;
        }

        #deck-list li {
            width: 100%;
            margin: 5px 0;
        }

        #deck-list button {
            width: 100%;
            padding: 10px;
            text-align: left;
            border: none;
            background-color: #34495e;
            color: white;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #deck-list button:hover {
            background-color: #16a085;
        }

        /* Main Content */
        #main-content {
            flex-grow: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #flashcard {
            width: 320px;
            height: 250px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            transition: transform 0.4s ease;
        }

        #flashcard.flipped {
            transform: rotateY(180deg);
        }

        #card-front, #card-back {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            padding: 10px;
            color: #2c3e50;
            background-color: #ecf0f1;
            position: absolute;
            backface-visibility: hidden;
        }

        #card-back {
            transform: rotateY(180deg);
            background-color: #f1c40f;
        }

        button {
            padding: 12px 20px;
            margin: 10px;
            font-size: 16px;
            color: white;
            background-color: #3498db;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        button:hover {
            background-color: #2980b9;
        }

        #review-buttons {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 10px 0;
            display: none;
        }

        .review-btn {
            width: 48%;
            padding: 12px;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
            background-color: #8e44ad;
            color: white;
            transition: all 0.3s ease;
        }

        .review-btn:hover {
            background-color: #9b59b6;
        }

        #card-status {
            margin-top: 20px;
            font-size: 18px;
            color: #2c3e50;
        }

        #review-actions {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 10px 0;
        }

        #review-actions button {
            width: 48%;
            background-color: #e67e22;
        }

        #review-actions button:hover {
            background-color: #d35400;
        }
    </style>
</head>
<body>

    <!-- Sidebar Section -->
    <div id="sidebar">
        <h2>Study Decks</h2>
        <ul id="deck-list">
            <li><button onclick="switchDeck('Microbiología')">Microbiología</button></li>
            <li><button onclick="switchDeck('Semiología')">Semiología</button></li>
            <!-- Add more decks here -->
        </ul>
    </div>

    <!-- Main Content Section -->
    <div id="main-content">
        <div id="flashcard">
            <div id="card-front">
                <p>What is the cause of Necrotizing Fasciitis?</p>
            </div>
            <div id="card-back">
                <p>Streptococcus pyogenes and Staphylococcus aureus</p>
            </div>
        </div>

        <!-- Review Options (After pressing Review button) -->
        <div id="review-actions">
            <button onclick="showReviewOptions()" id="review-button">Review</button>
            <button onclick="skipCard()" id="skip-button">Skip</button>
        </div>

        <div id="review-buttons">
            <button class="review-btn" onclick="rateCard(10)">10 min</button>
            <button class="review-btn" onclick="rateCard(60)">1 hour</button>
            <button class="review-btn" onclick="rateCard(1440)">1 day</button>
            <button class="review-btn" onclick="rateCard(2880)">2 days</button>
        </div>

        <!-- New vs Due Card Indicator -->
        <div id="card-status">
            <span id="status"></span>
        </div>
    </div>

    <script>
        let currentUser = localStorage.getItem('currentUser') ? JSON.parse(localStorage.getItem('currentUser')) : null;

        if (!currentUser) {
            // Redirect to the login page if no user is logged in
            window.location.href = 'index.html'; // Replace with your login page URL
        } else {
            console.log('Welcome,', currentUser.email);
        }
        
        let currentDeck = 'Microbiología'; // Starting deck
        let flashcards = [
            {
                question: "What is the cause of Necrotizing Fasciitis?",
                answer: "Streptococcus pyogenes and Staphylococcus aureus",
                interval: 1, // in minutes (for simplicity, in real use it will be calculated based on ratings)
                lastReview: new Date().getTime()
            }
            // Add more flashcards here
        ];

        let currentCardIndex = 0;

        // Flip Card Function
        function flipCard() {
            const card = document.getElementById('flashcard');
            card.classList.toggle('flipped');
        }

        // Rate Card and Update Interval
        function rateCard(minutes) {
            const currentCard = flashcards[currentCardIndex];
            const newReviewTime = new Date().getTime() + minutes * 60000; // Add minutes to current time
            currentCard.lastReview = newReviewTime;
            currentCard.interval *= 1.5; // Increase the interval for the next review (based on rating)
            showStatus('Due card updated!');
            setTimeout(() => loadNextCard(), 1000);
        }

        // Show Status Message
        function showStatus(status) {
            const statusElement = document.getElementById('status');
            statusElement.textContent = status;
        }

        // Show Review Buttons
        function showReviewOptions() {
            document.getElementById('review-buttons').style.display = 'flex';
            document.getElementById('review-actions').style.display = 'none';
        }

        // Skip Card (Move to next card without any update)
        function skipCard() {
            showStatus('Card skipped.');
            loadNextCard();
        }

        // Load Next Card
        function loadNextCard() {
            currentCardIndex = (currentCardIndex + 1) % flashcards.length;
            const currentCard = flashcards[currentCardIndex];
            document.getElementById('card-front').innerHTML = currentCard.question;
            document.getElementById('card-back').innerHTML = currentCard.answer;
            flipCard(); // Ensure it's showing the front at the start
            showStatus(currentCard.interval > 1 ? 'Due card' : 'New card');
            document.getElementById('review-buttons').style.display = 'none';
            document.getElementById('review-actions').style.display = 'flex';
        }

        // Switch Decks
        function switchDeck(deckName) {
            currentDeck = deckName;
            flashcards = getDeckData(deckName); // Replace this with actual deck data
            loadNextCard();
        }

        function getDeckData(deckName) {
            return [
                { question: "Sample question", answer: "Sample answer", interval: 1, lastReview: new Date().getTime() }
            ];
        }

        window.onload = loadNextCard;
    </script>

</body>
</html>